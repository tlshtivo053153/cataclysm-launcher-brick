# タスク: `tar-conduit`ライブラリへの置き換え

## 目的
`System.Process`でシステムの`tar`コマンドを呼び出している現在の`extractTar`の実装を、Haskellの`tar-conduit`ライブラリを使用する方式に置き換える。これにより、アプリケーションの移植性と堅牢性を向上させる。

## 背景
ファイル名破損バグの修正のため、`extractTar`の実装を一時的にシステムの`tar`コマンド呼び出しに変更した。しかし、この実装は`tar`コマンドがインストールされている特定の環境（Linux, macOSなど）に依存しており、Windowsなどでの動作を保証できない。また、エラーハンドリングも外部プロセスの`stderr`に依存するため、不安定である。

`tar-conduit`ライブラリは、プラットフォームに依存せず、ストリーミングベースで効率的にtarアーカイブを扱えるため、これらの問題を解決できる。

## 実装方針

1.  **依存関係の追加**:
    -   `package.yaml`に以下のパッケージを追加する。
        -   `tar-conduit`
        -   `conduit-extra`
        -   `resourcet`

2.  **`extractTar`関数の再実装**:
    -   `GameManager.hs`の`extractTar`関数を`tar-conduit`を使って書き換える。
    -   パイプラインを構築し、ダウンロードした`ByteString`をソースとして、`ungzip`と`Tar.extract`を繋げて展開処理を行う。
    -   `runResourceT`と`try`を使って、リソース管理と例外処理を安全に行う。

3.  **`--strip-components=1`の代替策の実装**:
    -   `tar-conduit`には`--strip-components`オプションがないため、代替策を実装する。
    -   **方針**: 展開後にディレクトリを移動する方法を採用する。
    -   **手順**:
        a. `Tar.extract`で、一度一時的なサブディレクトリに展開する。
        b. 展開後、そのサブディレクトリの中身をすべて親ディレクトリ（本来の`installDir`）に移動する。
        c. 空になった一時的なサブディレクトリを削除する。
    -   このロジックは、`extractTar`関数内で完結させる。

4.  **動作検証**:
    -   `GameManagerSpec.hs`に追加した、長いファイル名を持つアーカイブのテストが、新しい実装でもパスすることを確認する。
    -   手動テストで、実際のゲームが正しく展開・インストールされることを確認する。

## 期待される効果
-   **移植性の向上**: Windowsを含む、GHCが動作するすべての環境でアプリケーションが動作するようになる。
-   **堅牢性の向上**: エラーハンドリングがHaskellの型システム内で完結し、より予測可能で安定する。
-   **コードの統一性**: アプリケーションのロジックがすべてHaskellコードで完結する。
